<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>

		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
		<script type="text/javascript" src="js/jquery.browser.min.js"></script>
		<script type="text/javascript" src="js/xpath_lib.js"></script>
		<script type="text/javascript" src="js/xpath.js"></script>
		<script type="text/javascript" src="js/inspector.js"></script>
	
		<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">

		
		<script type="text/javascript">
		
		
		$(document).ready( function () {				
				
				$('#val_button').click( function () {

					var result = xPath.validate($('#xpath').val());

					if(result != 0 ) {

						alert(" Number of results "+result);
						var inputPath = document.getElementById("xpath").value;
						var iterator = document.evaluate(inputPath , document , null, XPathResult.ANY_TYPE,null);

						try {
							var ind=1;
							var thisNode = iterator.iterateNext();
							while (thisNode) {
								alert( "-- Result : "+ ind + " -- \n\n" + thisNode.textContent );
								thisNode = iterator.iterateNext();
								ind++;
							}
						} catch (e) {
							dump( 'Error: Document tree modified during iteration ' + e );
						}

					}
				});
				$('#result').keyup( function() {
					xPathValidation();
					elementInspector.cleanUpElem();
				});
				$('#cancel_button').click( function() {
					elementInspector.cleanUpElem();
				});
				window.onload = function() {

					elementInspector.init(document);

					elementInspector.onselectstart = function(node) {
						$('#result').val(xPath.generate(node, document));
						xPathValidation();
					}
					elementInspector.oncancel = function(node) {

					}
					elementInspector.onchange = function(node) {

					}
				}
			});</script>
	</head>
	<body > 
		
		<div id="xpathEvaluator">
		<b>Enter XPath for validation here:&nbsp;</b>
		<br/>
		<input type="text" id="xpath" name="xpath" size="80"/>
		<input type="button" value="Validate" id="val_button"/>
		<br/>
		<b>Generated XPath</b>
		<br/>
		<input type="text" id="result" value="" size="80"/>
		<label>
		</label>
		<br/>
		<input type="button" id="cancel_button" value="Cancel" />
		<br/>
		</div>
	
		<div id="apDiv1">
			<div id="apDiv2">
				<p>
					fhfghjfjfjfjtj
				</p>
				<table width="200" border="1">
					<tr>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td>bcnfmvmghm</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
				</table>
				<p>
					&nbsp;
				</p>
			</div>
			<div id="apDiv3">
				<p>
					sfgvegeg
				</p>
				<p>
					sfgvege2g
				</p>
				<table width="378" height="292" border="1">
					<tr>
						<td id="myid">with 1</td>
						<td id="myid">with 2</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>&nbsp;</td>
						<td id="myid">with id b f bfb fnb</td>
						<td>fn</td>
					</tr>
					<tr>
						<td>fnfn</td>
						<td class="myclass">myclass</td>
						<td>nffnfn</td>
					</tr>
				</table>
			</div>
			fnnfnfn
		</div>
	</body>
</html>
